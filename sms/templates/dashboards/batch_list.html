{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Batch Management</h2>
       
</div>


<a href="{% url 'create_batch' %}" class="btn btn-success mb-3">
    Create New Batch
</a>

<h4>Students</h4>

<table class="table table-bordered">
<tr>
    <th>Student</th>
    <th>Current Batch</th>
    <th>Action</th>
</tr>

{% for s in students %}
<tr>
    <td>{{ s.user.username }}</td>
    <td>
        {% if s.batch %}{{ s.batch }}{% else %}Not Assigned{% endif %}
    </td>
    <td>
        <a href="{% url 'assign_batch' s.id %}" class="btn btn-sm btn-warning">
            Assign Batch
        </a>
        {% if s.batch %}
            <a href="{% url 'remove_student_from_batch' s.id %}"
                class="btn btn-danger btn-sm"
                onclick="return confirm('Remove student from batch?');">
                Remove
            </a>
        {% endif %}
    </td>
</tr>
{% endfor %}
</table>
<hr class="my-5">

<h4>Available Batches</h4>

<table class="table table-bordered">
    <tr>
        <th>Program</th>
        <th>Name</th>
        <th>Academic Year</th>
        <th>Section</th>
        <th>Total Students</th>
    </tr>

    {% for batch in batches %}
    <tr>
        <td>{{ batch.program }}</td>
        <td>{{ batch.name }}</td>
        <td>{{ batch.academic_year }}</td>
        <td>{{ batch.section }}</td>
        <td>{{ batch.students.count }}</td>
        <td>
            <a href="{% url 'edit_batch' batch.id %}"
               class="btn btn-sm btn-warning">
               Edit
            </a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="5">No batches available.</td>
    </tr>
    {% endfor %}
</table>
<a href="{% url 'admin_dashboard' %}"
       class="btn btn-secondary mt-3">
       ‚Üê Go to Admin Dashboard
</a>
{% endblock %}