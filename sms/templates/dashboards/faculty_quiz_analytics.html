{% extends "base.html" %}
{% block content %}

<!-- ================= HEADER ================= -->
<div class="mb-4">
    <h2 class="fw-semibold mb-1" style="font-size:22px;">
        {{ quiz.title }} — Analytics
    </h2>
    <p class="text-muted small mb-0">
        {{ quiz.course.code }} — {{ quiz.course.name }}
    </p>
</div>

<!-- ================= SUMMARY CARD ================= -->
<div class="card shadow-sm border-0 mb-4">
    <div class="card-body p-4">

        <h6 class="fw-semibold text-secondary mb-3">
            Student Performance Overview
        </h6>

        <div class="table-responsive">
            <table class="table align-middle modern-table mb-0">

                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Attempts</th>
                        <th>Best Score</th>
                        <th>Best Percentage</th>
                    </tr>
                </thead>

                <tbody>
                    {% for stat in student_stats %}
                    <tr>
                        <td class="fw-medium">
                            {{ stat.student.user.username }}
                        </td>

                        <td>
                            <span class="badge bg-secondary">
                                {{ stat.attempts }}
                            </span>
                        </td>

                        <td>
                            {{ stat.best_score }}
                        </td>

                        <td>
                            <span class="badge 
                                {% if stat.best_percentage >= 40 %}
                                    bg-success
                                {% else %}
                                    bg-danger
                                {% endif %}
                            ">
                                {{ stat.best_percentage|floatformat:2 }}%
                            </span>
                        </td>
                    </tr>

                    {% empty %}
                    <tr>
                        <td colspan="4"
                            class="text-center text-muted py-4">
                            No attempts yet.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>

    </div>
</div>

<a href="{% url 'faculty_dashboard' %}"
   class="btn btn-outline-secondary btn-sm">
   <i class="bi bi-arrow-left me-1"></i>
   Back to Dashboard
</a>

<style>

/* Modern table style */
.modern-table {
    background: white;
    border-radius: 12px;
    overflow: hidden;
}

.modern-table thead {
    background: #f8fafc;
    font-size: 13px;
    text-transform: uppercase;
    color: #64748b;
}

.modern-table td,
.modern-table th {
    vertical-align: middle;
}

.badge {
    font-size: 12px;
    padding: 5px 8px;
    border-radius: 8px;
}

</style>

{% endblock %}
