{% extends "base.html" %}
{% block content %}

<h2>Timetable Management</h2>

<div class="card p-4 mb-4">
    <h5>Create New Schedule</h5>

    <form method="POST">
        {% csrf_token %}

        <div class="mb-3">
            <label>Batch</label>
            <select name="batch" class="form-control" required>
                {% for batch in batches %}
                    <option value="{{ batch.id }}">
                        {{ batch.program }} | {{ batch.section }} | {{ batch.academic_year }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label>Course</label>
            <select name="course" class="form-control" required>
                {% for course in courses %}
                    <option value="{{ course.id }}">
                        {{ course.code }} - {{ course.name }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label>Day</label>
            <select name="day" class="form-control">
                <option value="Mon">Monday</option>
                <option value="Tue">Tuesday</option>
                <option value="Wed">Wednesday</option>
                <option value="Thu">Thursday</option>
                <option value="Fri">Friday</option>
                <option value="Sat">Saturday</option>
            </select>
        </div>

        <div class="mb-3">
            <label>Start Time</label>
            <input type="time" name="start_time" class="form-control" required>
        </div>

        <div class="mb-3">
            <label>End Time</label>
            <input type="time" name="end_time" class="form-control" required>
        </div>

        <button type="submit" class="btn btn-success">
            Add Schedule
        </button>
    </form>
</div>


<div class="card p-4">
    <h5>My Schedule</h5>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Batch</th>
                <th>Course</th>
                <th>Day</th>
                <th>Time</th>
            </tr>
        </thead>
        <tbody>
        {% for t in timetables %}
            <tr>
                <td>{{ t.batch.program }} | {{ t.batch.section }}</td>
                <td>{{ t.course.code }}</td>
                <td>{{ t.get_day_display }}</td>
                <td>{{ t.start_time }} - {{ t.end_time }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="4">No schedules added.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
