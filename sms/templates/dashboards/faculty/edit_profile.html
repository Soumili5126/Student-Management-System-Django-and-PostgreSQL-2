{% extends "base.html" %}
{% block content %}

<!-- ================= HEADER ================= -->
<div class="mb-4">
    <h2 class="fw-semibold mb-1" style="font-size:22px;">
        Edit My Profile
    </h2>
    <p class="text-muted small mb-0">
        Update your personal information and account details
    </p>
</div>

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="card shadow-sm border-0">
        <div class="card-body p-4">

            <!-- ================= PROFILE IMAGE ================= -->
            <div class="text-center mb-4">

                {% if user_obj.profile_image %}
                    <img src="{{ user_obj.profile_image.url }}"
                         class="rounded-circle shadow-sm mb-3"
                         width="130"
                         height="130"
                         style="object-fit:cover;">
                {% else %}
                    <img src="https://via.placeholder.com/130"
                         class="rounded-circle shadow-sm mb-3">
                {% endif %}

                <div class="mx-auto" style="max-width:280px;">
                    <input type="file"
                           name="profile_image"
                           class="form-control form-control-sm">
                </div>

            </div>

            <!-- ================= BASIC INFO ================= -->
            <div class="row">

                <div class="col-md-6 mb-3">
                    <label class="form-label small fw-medium">Username</label>
                    <input type="text"
                           name="username"
                           value="{{ user_obj.username }}"
                           class="form-control form-control-sm">
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label small fw-medium">First Name</label>
                    <input type="text"
                           name="first_name"
                           value="{{ user_obj.first_name }}"
                           class="form-control form-control-sm">
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label small fw-medium">Last Name</label>
                    <input type="text"
                           name="last_name"
                           value="{{ user_obj.last_name }}"
                           class="form-control form-control-sm">
                </div>

            </div>

            <hr class="my-4">

            <!-- ================= FACULTY DETAILS ================= -->
            <div class="row">

                <div class="col-md-6 mb-3">
                    <label class="form-label small fw-medium">Department</label>
                    <input type="text"
                           name="department"
                           value="{{ faculty.department }}"
                           class="form-control form-control-sm">
                </div>

                <div class="col-md-6 mb-3">
                    <label class="form-label small fw-medium">Designation</label>
                    <input type="text"
                           name="designation"
                           value="{{ faculty.designation }}"
                           class="form-control form-control-sm">
                </div>

            </div>

            <!-- ================= ACTION BUTTONS ================= -->
            <div class="mt-3 d-flex gap-2">

                <button type="submit"
                        class="btn btn-primary btn-sm px-4">
                    <i class="bi bi-check-circle me-1"></i>
                    Save Changes
                </button>

                <a href="{% url 'faculty_dashboard' %}"
                   class="btn btn-outline-secondary btn-sm">
                    Cancel
                </a>

            </div>

        </div>
    </div>

</form>

{% endblock %}